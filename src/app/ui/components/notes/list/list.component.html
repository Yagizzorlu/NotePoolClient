<div class="notes-container">
  <div class="notes-header">
    <h1 class="notes-title">TÃ¼m Notlar</h1>
    <p class="notes-subtitle">Binlerce kaliteli notu keÅŸfedin ve paylaÅŸÄ±n</p>
  </div>

  <div class="notes-grid" *ngIf="notes && notes.length > 0">
    <div class="note-card" *ngFor="let note of notes">
      <!-- Card Header -->
      <div class="card-header">
        <div class="user-info">
          <div class="user-avatar">
            <span>ğŸ‘¤</span>
          </div>
          <div class="user-details">
            <div class="user-name">{{ note.userId?.substring(0, 8) || 'KullanÄ±cÄ±' }}</div>
            <div class="post-time">{{ note.createdDate | date:'dd MMM yyyy' }}</div>
          </div>
        </div>
        <div class="card-menu">
          <button class="menu-btn">â‹¯</button>
        </div>
      </div>

      <!-- Card Content -->
      <div class="card-content">
        <h3 class="note-title">{{ note.title }}</h3>
        <p class="note-description">{{ note.description || 'AÃ§Ä±klama yok' }}</p>
        
        <!-- Tags -->
        <div class="note-tags" *ngIf="note.tags">
          <span class="tag" *ngFor="let tag of note.tags.split(',')">{{ tag.trim() }}</span>
        </div>
      </div>

      <!-- Card Actions -->
      <div class="card-actions">
        <button class="action-btn like-btn" 
                [class.active]="noteStats[note.id]?.isLiked"
                (click)="likeNote(note.id)">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M10 17.5L8.5 16.125C3.5 11.5 0 8.625 0 5.25C0 2.75 2 0.75 4.5 0.75C6.25 0.75 8 2 9 3.375C10 2 11.75 0.75 13.5 0.75C16 0.75 18 2.75 18 5.25C18 8.625 14.5 11.5 9.5 16.125L10 17.5Z" 
                  [attr.fill]="noteStats[note.id]?.isLiked ? 'currentColor' : 'none'"
                  stroke="currentColor" 
                  stroke-width="1.5" 
                  stroke-linecap="round" 
                  stroke-linejoin="round"/>
          </svg>
          <span>{{ noteStats[note.id]?.likes || 0 }}</span>
        </button>

        <button class="action-btn dislike-btn"
                [class.active]="noteStats[note.id]?.isDisliked"
                (click)="dislikeNote(note.id)">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M10 2.5L11.5 3.875C16.5 8.5 20 11.375 20 14.75C20 17.25 18 19.25 15.5 19.25C13.75 19.25 12 18 11 16.625C10 18 8.25 19.25 6.5 19.25C4 19.25 2 17.25 2 14.75C2 11.375 5.5 8.5 10.5 3.875L10 2.5Z" 
                  [attr.fill]="noteStats[note.id]?.isDisliked ? 'currentColor' : 'none'"
                  stroke="currentColor" 
                  stroke-width="1.5" 
                  stroke-linecap="round" 
                  stroke-linejoin="round"/>
          </svg>
          <span>{{ noteStats[note.id]?.dislikes || 0 }}</span>
        </button>

        <button class="action-btn comment-btn" (click)="showComments(note.id)">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M17.5 9.375C17.5 13.125 13.75 16.25 9.375 16.25C8.25 16.25 7.1875 16.0625 6.25 15.75L2.5 17.5L4.1875 14.0625C2.6875 12.625 1.875 11.0625 1.875 9.375C1.875 5.625 5.625 2.5 10 2.5C14.375 2.5 17.5 5.625 17.5 9.375Z" 
                  stroke="currentColor" 
                  stroke-width="1.5" 
                  stroke-linecap="round" 
                  stroke-linejoin="round"/>
          </svg>
          <span>Yorum</span>
          <span class="comment-count">({{ noteStats[note.id]?.comments || 0 }})</span>
        </button>

        <button class="action-btn download-btn" (click)="downloadNote(note.id)">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M17.5 12.5V15.625C17.5 16.375 16.875 17 16.125 17H3.875C3.125 17 2.5 16.375 2.5 15.625V12.5M5.625 8.75L10 13.125L14.375 8.75M10 13.125V2.5" 
                  stroke="currentColor" 
                  stroke-width="1.5" 
                  stroke-linecap="round" 
                  stroke-linejoin="round"/>
          </svg>
          <span>Ä°ndir</span>
        </button>

        <button class="action-btn pdf-btn" (click)="addNotePdfs(note.id)" title="PDF DosyalarÄ±">
          <img src="assets/images/pdf.png" alt="PDF" style="width: 20px; height: 20px;">
        </button>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!notes || notes.length === 0">
    <div class="empty-icon">ğŸ“</div>
    <h3 class="empty-title">HenÃ¼z not bulunamadÄ±</h3>
    <p class="empty-text">Ä°lk notu paylaÅŸmak iÃ§in yÃ¼kleyebilirsiniz</p>
  </div>

  <!-- Pagination -->
  <div class="pagination-wrapper" *ngIf="notes && notes.length > 0">
    <mat-paginator 
      (page)="pageChanged()" 
      [pageSizeOptions]="[5, 10, 20, 50]"
      [pageSize]="5"
      [length]="totalCount"
      showFirstLastButtons>
    </mat-paginator>
  </div>
</div>